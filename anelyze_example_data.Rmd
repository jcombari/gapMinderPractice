---
title: "R Notebook"
output: html_notebook
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
```
#Read xlxs

```{r}
excel <- read_excel("data/datos.xlsx", col_types= c("numeric", "text", "date", "text", "numeric", "text", "numeric",
"numeric", "numeric", "numeric", "numeric", "numeric"))

datos_tidy <- excel %>% 
  mutate (
    acreedor = case_when(
      SALUD == 1 ~"salud",
      BANCO==1 ~ "banco",
      PENSION==1  ~ "pension",
      VIAJES==1  ~ "viajes",
      DEUDAS==1  ~ "deudas",
      TRUE ~ "no asignado"
    )
 )

saveRDS(datos_tidy, "data/data_tidy.rds")
```

#cuantos 
no_asignados : registros que no tienen una tipo de deudad asignado 
error_asig   : verificar si el registro no tiene mas de 1 tipo de deuda
incumplio    : validar si tiene una deuda pero no pago 
```{r}
print(summary(new_dat$incumplio == 1))
```

```{r}
ggplot(new_dat, aes(acreedor,PAGO)) +
  geom_boxplot() +
   labs(title = "Tipos de pago")
```

# plOt para verificar los meses con pagos mas altos dentro de la data

```{r}

ggplot(new_dat %>% na.omit(), aes(factor(month(FECHA, label = TRUE)),PAGO)) +
  geom_boxplot() +
   labs(title = "PAGOS POR MES")
```

